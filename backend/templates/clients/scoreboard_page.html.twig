{% extends 'base.html.twig' %}

{% block title %}scoreboard{% endblock %}

{% block stylesheets %}
    <link rel="stylesheet" href="{{ asset('assets/css/scoreboard.css') }}">
{% endblock %}

{% block body %}
    <script>
        window.appData = {{ {
            lang: lang,
            num: users_id,
            num_st: id_status,
            status: status
        }|json_encode|raw }};
    </script>

    <header class="table_header">
        <table style="width: 100%;">
            <tr>
                <td style="text-align: left; width: 1%;">
                    {% include 'clients/components/button_redirection.html.twig' %}
                </td>
                <td style="text-align: center; width: 98%;">
{#                    {% if competition is not empty %}
                        {% include 'components/scoreboard_header.html.twig' %}
                    {% endif %}#}
                </td>
            </tr>
        </table>       
    </header>

    <main>
        <table class="table_header_title">
{#            {% if
                competition is not empty
                and sessions_name is not empty
                and discipline is not empty
                and attempt != 0
            %}
                {% include 'components/scoreboard_table_header.html.twig' %}
                {% include 'components/scoreboard_table_body.html.twig' %}
            {% endif %}#}
        </table>
    </main>
{#    {% include 'templates_admin/postForm.html.twig' %}#}
{% endblock %}

{% block javascripts %}
    {{ parent() }}
    <script type="module" src="{{ asset('assets/js/buttonReturn.js') }}"></script>
{#
    <script src="assets/switchLanguage.js"></script>
    <script src="assets/clients_js/scoreboard.js"></script>
    <script src="assets/checkSessionStatus.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            switchLanguage(lang);
            checkSessionStatus();
            setInterval(checkSessionStatus, 20 * 60 * 1000);
            let lastCheck = Date.now();
            setInterval(() => {
                const now = Date.now();
                if (now - lastCheck > 120 * 1000){
                    console.log('waking up');
                    checkSessionStatus();
                }
                lastCheck = now;
            }, 10000);
        });
    </script>
    <script src="http://localhost:3000/socket.io/socket.io.js"></script>
    <script src="assets/socket_client.js"></script>#}
{% endblock %}